---
# Shared config
- hosts:
  - tag_ansible_role_master
  - tag_ansible_role_worker
  roles:
    - docker
    - ssh-keys
    - kubelet
  become: true

- hosts:
  - tag_ansible_role_master
  roles:
    - kubeadm-master
    - cloudflare-dns
  become: true

- hosts:
  - tag_ansible_role_master
  roles:
    - kubernetes-users

- hosts:
  - tag_ansible_role_worker
  roles:
  - kubeadm-slave
  become: true

# Extra services
- hosts:
  - tag_ansible_role_master
  roles:
  - kubernetes-services
  - sealed-secrets
  #- longhorn
  - kubernetes-storage-local
